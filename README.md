# Image Classifier

## 介绍

> 本项目通过 uv 进行项目管理。

本项目是一个特化的工具项目，专门为了指定的需求而实现。主体代码通过 ai 生成，然后经过微调后，可用。

当前需求如下：

- 图像分类脚本：classifier.py
  - 共有 40 个类别的数据。
  - 图像文件名中，sim 前的第一个数字表示当前图片所属的类别编号。
  - 将图像按照不同的类别进行划分，然后创建对应类别的文件夹放入其中。
- 图像相似判断 gui 程序
  - 无侧边栏版本，要求高性能: no_side.py
    - 能够选择打开保存有`要按照相似或不相似进行分类的图片`的目录，并显示其中的图片。
    - 可以切换查看不同的图片。
    - 具有相似和不相似两个按钮，按下后将会把该图片移动到当前目录下名为`相似`或`不相似`的目录。
  - 有侧边栏版本，要求能够查看当前目录结构
    - 在无侧边栏的基础上，每次操作相似或不相似都会对应更新侧边栏中展示的目录结构。

统计需求：

- 使用class_statistics.py将会统计当前的2个数据集目录下的图片文件的数量并生成statistics.json和image_data.xlsx文件。
- json2excel.py文件则根据前一步生成的statistics.json文件，制作statistics.xlsx文件，以excel的方式展示统计结果。

## 目录结构

虽然创建了目录结构，但是核心代码由于都是一个个简单脚本，因此都放在项目的根目录下。

后续如果项目继续更新，再采用现代的项目结构进行重构。

## 设计思路

- GUI 部分：使用 tinker 实现图形化布局：
  - Frame 对 UI 进行分区
  - Button 绑定要执行事件，并与键盘按键进行绑定
  - Label 进行图片展示和状态文本提示
- 功能部分：借助命令模式使操作可撤回
  - 将打开的目录下的图片文件保存在 deque 中，每次访问都是 popleft 第一个文件名，然后展示。
  - 图片总数就是这个 deque+1（当前展示的图片不为空时）
  - 使用一个命令队列保存操作，每次分类时，就新建一个命令类，保存当前文件名和要移动的目录，然后访问下一个文件。
  - 撤回时，先保存当前展示的图片到 deque 中，然后从命令队列弹出最后加入的命令，将图片名取出进行展示。

## 致谢

- 腾讯元宝：提供了 ai 功能，生成了本项目的核心代码。
- uv：提供了方便好用的项目管理解决方案。

## 许可证

项目采用 Apache v2.0 许可证。
